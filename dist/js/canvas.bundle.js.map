{"version":3,"sources":["webpack:///webpack/bootstrap 2daea670fcc054ca8dd0","webpack:///./src/canvas.js"],"names":["canvas","document","querySelector","c","getContext","width","innerWidth","height","innerHeight","canvasWith","window","canvasHeight","fullScreen","webkitRequestFullScreen","mozRequestFullScreen","getElementById","addEventListener","randomIntFromRange","min","max","Math","floor","random","AudioContext","webkitAudioContext","mozAudioContext","audioCtx","audioBuffer","audioSource","analyser","createAnalyser","frequencyData","Uint8Array","frequencyBinCount","timeToBegin","DELTA_TIME","LAST_TIME","Date","now","opts","barWidth","ball","radius","opacity","friction","gravity","ballNumber","ballArray","beginningX","beginningY","beginningVx","beginningVy","ballsBass","ballsKick","ballsMelody","colors","Ball","x","y","vx","vy","color","update","draw","beginPath","arc","PI","fillStyle","stroke","fill","closePath","loadSound","url","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","createBufferSource","connect","destination","frame","send","init","rect","i","push","setTimeout","forEach","start","requestAnimationFrame","getByteFrequencyData","margin","nbBars","cumul","average","percentIdx","frequencyIdx","fillRect"],"mappings":"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","file":"canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2daea670fcc054ca8dd0","/*\n Canvas stuff\n */\nconst canvas = document.querySelector('canvas');\nconst c = canvas.getContext('2d');\ncanvas.width = innerWidth;\ncanvas.height = innerHeight;\nvar canvasWith = window.innerWidth;\nvar canvasHeight = window.innerHeight;\n\n/*\n Functions\n */\nfunction fullScreen () {\n    if(canvas.webkitRequestFullScreen) {\n        canvas.webkitRequestFullScreen();\n    }\n    else {\n        canvas.mozRequestFullScreen();\n    }\n}\ndocument.getElementById('fullScreen').addEventListener('click', fullScreen);\n\n\nfunction randomIntFromRange(min,max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n\n\n/*\n Audio Stuff\n */\nwindow.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;\nvar audioCtx = new AudioContext();\nvar audioBuffer;\nvar audioSource;\nvar analyser = audioCtx.createAnalyser();\nvar frequencyData = new Uint8Array(analyser.frequencyBinCount);\nvar timeToBegin = 3000;\n\n// Time stuff\nvar DELTA_TIME = 0;\nvar LAST_TIME = Date.now();\n\n// To delete\nvar opts = {\n    barWidth: 10\n}\n\n\n\n/*\n Ball Stuff\n */\nvar ball;\nvar radius = 45;\nvar opacity = 0.7;\nvar friction = 0.6;\nvar gravity = 3;\n\nvar ballNumber = 100;\nvar ballArray = [];\n\nvar beginningX = canvas.width / 2;\nvar beginningY = canvas.height / 2;\nvar beginningVx = 0;\nvar beginningVy = 3;\n\nvar ballsBass = Math.floor(ballNumber / 3);\nvar ballsKick = Math.floor((ballNumber - ballsBass) / 2);\nvar ballsMelody = ballNumber - (ballsBass + ballsKick);\n\nconst colors = [\n    'rgb(136,216,176)',\n    'rgba(255,238,173,' + opacity + '',\n    'rgba(255,111,105,' + opacity + ''\n];\n\n\n\n// Object\nfunction Ball(x, y, vx, vy, radius, color) {\n\tthis.x = x;\n\tthis.y = y;\n\tthis.vx = vx;\n\tthis.vy = vy;\n\tthis.radius = radius;\n\tthis.color = color;\n\n\tthis.update = () => {\n\t\t// Gravity of the ball\n\t\tif (this.y + this.radius + this.vy > canvas.height) {\n\t\t\tthis.vy = -this.vy * friction;\n\t\t\tthis.vx = this.vx * friction;\n\t\t} else {\n\t\t\tthis.vy += gravity\n\t\t}\n\n\t\tif (this.x + this.radius + this.vx > canvas.width || this.x - this.radius <= 0) {\n\t\t\tthis.vx = -this.vx * friction\n\t\t}\n\n\t\tthis.x += this.vx;\n\t\tthis.y += this.vy;\n\t\tthis.draw();\n\t};\n\n\tthis.draw = () => {\n\t\tc.beginPath();\n\t\tc.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\n\t\tc.fillStyle = this.color;\n\t\tc.stroke();\n\t\tc.fill();\n\t\tc.closePath();\n\t};\n}\n\n\n\nfunction loadSound(url) {\n    var request = new XMLHttpRequest();\n    request.open('GET', './sounds/sound.mp3', true);\n    request.responseType = 'arraybuffer';\n\n    // Decode asynchronously\n    request.onload = function() {\n\n        audioCtx.decodeAudioData(request.response, function(buffer) {\n\n            // success callback\n            audioBuffer = buffer;\n\n            // Create sound from buffer\n            audioSource = audioCtx.createBufferSource();\n            audioSource.buffer = audioBuffer;\n\n            // connect the audio source to context's output\n            audioSource.connect( analyser )\n            analyser.connect( audioCtx.destination )\n            frame()\n\n        }, function(){\n\n            // error callback\n            //\n        });\n    }\n    request.send();\n}\n\n\n\nfunction init() {\n\t// Draw background rectangle\n\tc.beginPath();\n\tc.rect(0,0,canvas.width,canvas.height);\n\tc.fillStyle = 'rgb(29, 29, 29)';\n\tc.fill();\n\tc.closePath();\n\n\t// Clear tab while resizing the canvas\n\tballArray = [];\n\n\tfor (var i = 0; i < ballsBass; i++) {\n\t\tballArray.push(new Ball(beginningX, beginningY + 8, beginningVx, beginningVy, radius - 8 , colors[0]))\n\t}\n\n\tfor (var i = 0; i < ballsKick; i++) {\n\t\tballArray.push(new Ball(beginningX, beginningY + 4, beginningVx, beginningVy, radius - 4, colors[1]));\n\t}\n\n\tfor (var i = 0; i < ballsMelody; i++) {\n\t\tballArray.push(new Ball(beginningX, beginningY, beginningVx, beginningVy, radius, colors[2]));\n\t}\n\n\t// First explosion\n\tsetTimeout(function () {\n\t\tballArray.forEach(ball => {\n\t\t\tball.vx = randomIntFromRange(-30, 30);\n\t\t\tball.vy = randomIntFromRange(10, 100);\n    \t})\n        audioSource.start();\n    }, timeToBegin);\n}\n\n\n\nfunction frame() {\n    requestAnimationFrame( frame )\n\n    DELTA_TIME = Date.now() - LAST_TIME;\n    LAST_TIME = Date.now();\n\n    // analyser.getByteFrequencyData(frequencyData);\n    analyser.getByteFrequencyData(frequencyData);\n\n\n    var barWidth = opts.barWidth;\n    var margin = 2;\n    var nbBars = canvasWith / ( barWidth - margin );\n\n    var cumul = 0;\n    var average = 0;\n\n    c.fillStyle = 'red'\n    c.beginPath()\n    for ( var i = 0; i < nbBars; i++ ) {\n\n        // get the frequency according to current i\n        let percentIdx = i / nbBars;\n        let frequencyIdx = Math.floor(1024 * percentIdx)\n\n        c.rect( i * barWidth + ( i * margin ), canvasHeight - frequencyData[frequencyIdx] , barWidth, frequencyData[frequencyIdx] );\n\n        cumul += frequencyData[frequencyIdx];\n\n    }\n    c.fill()\n    c.closePath()\n\n    average = cumul / 255;\n    // console.log(average);\n\n\n    c.fillStyle = 'rgba(29, 29, 29, 0.7';\n    c.fillRect(0, 0, canvas.width, canvas.height);\n\n    ballArray.forEach(ball => {\n        ball.update();\n\t})\n}\n\ninit();\nloadSound()\n\n\n// WEBPACK FOOTER //\n// ./src/canvas.js"],"sourceRoot":""}